<head>
	<title>autonomys+experiment</title>

	<!-- Needed by the default built-in login UI. -->
	<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

	<!-- //////////////////////////////////////////////////////////// -->
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Three.js Host Test</title>

	<script>
		{
			let exports = undefined
			Object.defineProperty(globalThis, 'exports', {
				get() {
					console.log('get exports')
					return exports
				},
				set(v) {
					console.log('set exports')
					// This will pause on code output that was generated by
					// Meteor for `client/main.js`, and shows that Meteor's
					// output tries to create a global `exports` object.
					debugger
					exports = v
				},
			})
		}
	</script>

	<!--Text to speech dependency-->
	<script type="text/javascript" src="https://sdk.amazonaws.com/js/aws-sdk-2.645.0.min.js"></script>
	<!-- Convert to ESM -->
	<!--Three.js dependencies-->
	<!-- <script src="https://cdn.jsdelivr.net/npm/three@>=0.155.0/build/three.js"></script> -->
	<!--Host build file copied over from the build output of the Amazon Sumerian three.js demo.-->
	<!-- <script type="text/javascript" src="/host.three.js"></script> -->

	<!-- <script type="importmap">{
        "imports": {
            "@amazon-sumerian-hosts/core": "../node_modules/@amazon-sumerian-hosts/core"
        }
    }</script> -->
	<!-- Tell the browser's ES Module system where to find certain packages
		(f.e. the "lume" in "import {defineElements} from 'lume'", etc. -->
	<script type="importmap">
		{
			"imports": {
				"lume": "/node_modules/lume/dist/index.js",
				"lume/": "/node_modules/lume/",
				"@lume/element": "/node_modules/@lume/element/dist/index.js",
				"@lume/variable": "/node_modules/@lume/variable/dist/index.js",
				"@lume/eventful": "/node_modules/@lume/eventful/dist/index.js",
				"@lume/kiwi": "/node_modules/@lume/kiwi/es/kiwi.js",
				"@lume/three-projected-material/": "/node_modules/@lume/three-projected-material/",
				"@lume/autolayout/": "/node_modules/@lume/autolayout/",
				"lowclass": "/node_modules/lowclass/dist/index.js",
				"james-bond": "/node_modules/james-bond/dist/index.js",
				"regexr": "/node_modules/regexr/src/index.js",
				"element-behaviors": "/node_modules/element-behaviors/dist/index.js",
				"@lume/custom-attributes/": "/node_modules/@lume/custom-attributes/",
				"solid-js": "/node_modules/solid-js/dist/solid.js",
				"solid-js/web": "/node_modules/solid-js/web/dist/web.js",
				"solid-js/html": "/node_modules/solid-js/html/dist/html.js",
				"solid-js/store": "/node_modules/solid-js/store/dist/store.js",
				"three": "/node_modules/three/src/Three.js",
				"three/": "/node_modules/three/",

				"meteor/meteor": "/modules/meteor.js",
				"meteor/tracker": "/modules/meteor.js",
				"meteor/blaze": "/modules/meteor.js",
				"meteor/templating": "/modules/meteor.js"
			}
		}
	</script>
</head>

<body>
	<noscript>This app requires JavaScript</noscript>

	<link rel="stylesheet" href="/styles.css" />

	<auto-app></auto-app>

	<div id="debug">
		<style>
			#debug {
				color: red;
				position: absolute;
				bottom: 0;
				left: 0;
				height: 300px;
				width: 600px;
				overflow: auto;
				pointer-events: none;
			}
		</style>

		<script>
			const div = document.getElementById('debug')
			window.addEventListener('error', event => {
				/** @type {Error | undefined} */
				const error = event.error
				console.error('Uncaught Error Event', event.error, event.lineno, event.colno, error?.stack, error?.message)
				div.insertAdjacentHTML('beforeend', '<br />' + error?.message + '<br />' + error?.stack)
			})
		</script>
	</div>

	<!--Create the Three.js scene-->
	<script type="module" src="/main.js"></script>
</body>
